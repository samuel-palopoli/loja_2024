<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastrar Vendas</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
    <main>
        <h2>Cadastrar Vendas</h2>
        <section id="addvenda">
            <form action="/registrarvenda" method="post">
                <div class="row">
                    <div class="col">
                        <label for="horavenda" class="form-label">Hora da Venda</label>
                        <input type="time" class="form-control" name="horavenda" id="horavenda" tabindex="1" autofocus>

                        <!-- Selecione as skins dinamicamente, se você tiver um array de skins disponíveis -->
                        <label for="selecioneskin"  class="form-label">Skins</label>
                        <select name="selecioneskin" id="selecioneskin" class="form-control" tabindex="2">
                            <% for(let skin of skins){ %>

                                <option id="option" value="<%= skin.id %>"><%= skin.nome %></option>

                             <% } %>
                        </select>
                    </div>

                    <div class="col">
                        <label for="diavenda"  class="form-label">Dia da Venda</label>
                        <input type="date" class="form-control" name="diavenda" id="diavenda" tabindex="2" >

                        <!-- Selecione os cupons dinamicamente, se você tiver um array de cupons disponíveis -->
                        <label for="inserircupom"  class="form-label">Cupom</label>
                        <select name="inserircupom" id="inserircupom" class="form-control" tabindex="4">
                            <% for(let cupom of cupoms){ %>

                                <option id="option" value="<%= cupom.id %>"><%= cupom.nome %></option>

                             <% } %>
                        </select>
                    </div>
                </div>
               
                <div class="row">
                    <input type="submit" class="btn btn-primary mt-4" value="Atualizar" name="btcadskin" id="btcadskin" tabindex="5">
                </div>
            </form>
        </section>
    </main>
    <script>
        async function carregarVendas() {
            try {
                const data = await fetch("http://localhost:3002/vendas"); // Corrigindo a URL da requisição
                const json = await data.json();
                const vendas = await json;

                // Aqui você pode usar as informações de 'vendas' para atualizar o conteúdo da página
            } catch (error) {
                console.error("Erro ao carregar vendas:", error);
            }
        }

        carregarVendas();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
